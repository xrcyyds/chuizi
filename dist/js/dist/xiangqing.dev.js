"use strict";$(function(){$(".header-car").hover(function(){$(".show-car").addClass("show")},function(){$(".show-car").removeClass("show")}),$(".active").click(function(){location.href="../html/index.html"})});var reg=/id=(\d+)/;reg.test(location.search)||(location.href="../html/index.html");var id=reg.exec(location.search)[1],main=document.querySelector(".main");function renderHTML(n){main.innerHTML='\n        <div class="info">\n                    <div class="title">\n                        <h1>'.concat(n.title,"</h1>\n                        <h2> ").concat(n.title1,' </h2>\n                    </div>\n                    <div class="active">\n                        <span class="active-title">促销活动</span>\n                        <div class="active-wrapper">\n                            <div class="active-item">\n                                <span class="tag">新人礼</span>\n                                <span class="item-content">下载 App 领新人大礼包，首单优惠购最低只要 ¥ 9.9 \n                                    <a href="">查看详情</a>\n                                </span> \n                            </div>\n                        </div>\n                    </div>\n                    <div class="product">\n                        <div class="top">\n                            <span class="spec-name">颜色选择</span>\n                            <div class="spec-info">\n                                <button>').concat(n.color,'</button>\n                            </div>\n                        </div>\n                        <div class="bottom">\n                            <span class="spec-name">数量选择</span>\n                            <div class="spec-info">\n                                <button class="reduce"> - </button>\n                                <button class="num"> 1 </button>\n                                <button class="add"> + </button>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="clearfix">\n                        <div>\n                            <span>服务说明</span>\n                            <aside class="text">\n                                <p>*满99元包邮</p>\n                            </aside>\n                        </div>\n                    </div>\n                </div>\n                <figure class="view">\n                    <img src="').concat(n.img,'" alt="">\n                </figure>\n                <div class="follow">\n                <div class="follow-wrapper">\n                    <h1 class="bar-text">您已选择了</h1>\n                    <div class="bar-info">\n                        <h1 class="clearfix">\n                            <span class="title">').concat(n.title," x 1</span>                            \n                        </h1>\n                        <h2>").concat(n.color,'</h2>\n                    </div>\n                    <div class="bar-btn">\n                        <a class="add-car">加入购物车</a>\n                    </div>\n                    <div class="bar-btn white-btn">\n                        <a  class="go-car">现在购买</a>\n                    </div>\n                    <div class="bar-price">\n                        <div>\n                        <span>').concat(n.price,"</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ");document.querySelector(".reduce");var e=document.querySelector(".num"),a=(document.querySelector(".add"),document.querySelector(".info .title h1")),i=document.querySelector(".bar-info .clearfix .title"),t=document.querySelector(".bar-price div span"),c=n.price.split("￥")[1].replace(",","");main.onclick=function(){var n=window.event;if("reduce"==n.target.className&&(1<e.innerHTML?(e.innerHTML=e.innerHTML-1,i.innerHTML=a.innerHTML+"x"+e.innerHTML,t.innerHTML="￥"+(c*e.innerHTML).toFixed(2)):e.innerHTML=1),"add"==n.target.className&&(e.innerHTML=+e.innerHTML+1,i.innerHTML=a.innerHTML+"x"+e.innerHTML,t.innerHTML="￥"+(c*e.innerHTML).toFixed(2)),"go-car"==n.target.className&&(console.log(1),location.href="../html/car.html"),"add-car"==n.target.className){n=getCookie("login");if(console.log(n),console.log(e.innerHTML),!n)return alert("请先登录"),localStorage.setItem("url",location.href),void(location.href="../html/denglu.html");pAjax({url:"../api/addCar.php",type:"post",data:{goods_id:id,username:n,goods_num:e.innerHTML}}).then(function(n){console.log(n)})}}}pAjax({url:"../api/getDetail.php",data:{id:id}}).then(function(n){renderHTML((n=JSON.parse(n)).detail)});