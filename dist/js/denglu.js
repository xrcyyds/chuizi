"use strict";$(function(){$.getJSON("../js/countrylist.json","",function(o){var s="";$.each(o,function(o,t){s+="<li>"+t.name+"</li>"}),$(".countrylist").html(s),$(".countrylist").prepend('<p class="p">国家和地区</p>')}),$(".countrylist").niceScroll({cursorborder:"",cursorcolor:"rgba(0,0,0,0)",boxzoom:!0}),$(".cy").click(function(o){"none"==$(".countrylist").css("display")?($(".countrylist").show(),$(document).one("click",function(){$(".countrylist").hide()}),o.stopPropagation()):$(".countrylist").hide(),$(".countrylist").children().filter("li").click(function(){console.log($(this).text()),$(".cy").text($(this).text())})}),$(".eye").click(function(){"password"==$(".pass").attr("type")?$(".pass").attr("type","text"):$(".pass").attr("type","password"),'url("http://www.chuizi.com/images/eye-hidden.png")'==$(".eye").css("background-image")?$(".eye").css("background-image",'url("http://www.chuizi.com/images/eye_show.png'):$(".eye").css("background-image",'url("http://www.chuizi.com/images/eye-hidden.png')});var o=/^1[356789]\d{9}$/;$(".phone").focus(function(){$(".phone").attr("placeholder","")}),$(".phone").blur(function(){""!=$(".phone").val()?o.test($(".phone").val())?$(".error1").css({display:"none",opacity:"0"}):$(".error1").css({display:"block",opacity:"1"}):$(".phone").attr("placeholder","手机号")}),$(".phone").on("input",function(){""!=$(".phone").val()&&""!=$(".pass").val()?$(".btn").css("opacity","1"):$(".btn").css("opacity","0.3")}),$(".pass").on("input",function(){""!=$(".phone").val()&&""!=$(".pass").val()?$(".btn").css("opacity","1"):$(".btn").css("opacity","0.3")}),$(".pass").focus(function(){$(".mm").css("display","none")}),$(".pass").blur(function(){""==$(".pass").val()?$(".mm").css("display","inline-block"):$(".mm").css("display","none")}),$(".btn").click(function(){$.ajax({type:"post",url:"../api/denglu.php",data:{username:$(".phone").val(),password:$(".pass").val()},dataType:"json",success:function(o){1==o.code?(setCookie("login",$(".phone").val()),(o=localStorage.getItem("url"))?(location.href=o,localStorage.removeItem("url")):location.href="../html/index.html",$(".error2").css({display:"none",opacity:"0"})):$(".error2").css({display:"block",opacity:"1"})}})})});